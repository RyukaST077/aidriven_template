## 0. この文書の位置づけ（必ず最初に書く）

- 本書：**要件（What）**／**受入条件（How to accept）**
- 方式設計・基本設計：**設計（How）**
- 画面設計・IF設計・データ設計：**仕様の具体化（How）**
- テスト計画・テスト仕様：**検証方法（How to verify）**

> コツ：要件は **観測可能・測定可能・テスト可能** にする。  
> 実装方式や画面レイアウトなどは原則「設計書側」に寄せる（ただし受入に直結するUI制約、法令、ブランドガイド等は制約として本書に残す）。

---

# 1. 文書管理

## 1.1 版数・変更履歴

| 版 | 日付 | 変更概要 | 作成 | レビュー | 承認 |
|---|---|---|---|---|---|
| v0.1 | yyyy/mm/dd | 初版 |  |  |  |

## 1.2 用語・略語（Glossary）

| 用語 | 定義 | 備考 |
|---|---|---|
| BREQ | ビジネス要求ID |  |
| FR | 機能要件ID |  |
| NFR | 非機能要件ID |  |
| CON | 制約ID |  |
| AC | 受入条件ID |  |
| BP | 業務プロセスID |  |
| ACT | アクティビティID |  |
| BRL | 業務ルールID |  |
| EX | 業務例外ID |  |
| SC | データスコープID |  |
|  |  |  |

## 1.3 参照資料

| 資料名 | 版 | 場所/リンク | 備考 |
|---|---|---|---|
| 業務フロー／業務ルール定義 |  |  | To-Be/例外/権限ルール |
| 機能一覧・画面／帳票一覧 |  |  | ユースケース可 |
| 方式設計 |  |  | 構成/環境/ログ/権限方針 等 |
| テスト計画書 |  |  | 受入方針/範囲の整合 |

---

# 2. 背景・目的・ゴール

## 2.1 背景（現状課題）
- 現状：  
- 課題：  
- 影響：  

## 2.2 目的（Why）
- 目的：  
- 期待効果（定量/定性）：  
  - 例）処理時間▲30%、問合せ件数▲20% 等

## 2.3 成果物と範囲（本プロジェクトの提供物）
- 提供するシステム／機能：  
- 提供しないもの：  

---

# 3. スコープ定義

## 3.1 対象範囲（In Scope）
- 対象業務：  
- 対象組織：  
- 対象データ：  
- 対象環境（本番/検証/開発）：  

## 3.2 対象外（Out of Scope）
-  

## 3.3 ステークホルダー／RACI

| 項目 | 責任者(R) | 承認(A) | 相談(C) | 共有(I) |
|---|---|---|---|---|
| 要件確定 |  |  |  |  |
| 受入判定 |  |  |  |  |
| 運用設計 |  |  |  |  |

---

# 4. 前提・依存・リスク（要件の土台）

## 4.1 前提（Assumptions）

| ID | 前提 | 根拠/出典 | 影響 | 確認期限 | オーナー |
|---|---|---|---|---|---|
| ASM-001 |  |  |  |  |  |

## 4.2 依存関係（他システム/他PJ/組織）

| ID | 依存事項 | 相手/担当 | 期日 | 未確定時の影響 | 対応方針 |
|---|---|---|---|---|---|
| DEP-001 |  |  |  |  |  |

## 4.3 リスク一覧（要件観点）

| ID | リスク | 発生確率 | 影響度 | 対策 | 残リスク |
|---|---|---|---|---|---|
| RSK-001 |  |  |  |  |  |

---

# 5. 要求（ビジネス要求）整理（上位要求）

> 機能要件の前に「何のためか」を固定します（スコープブレ防止）。

## 5.1 ビジネス要求一覧（BREQ）

| BREQ-ID | 要求（1文） | 成功指標(KPI) | 優先度 | 根拠/出典 | 関連業務フロー |
|---|---|---|---|---|---|
| BREQ-001 |  |  | Must |  | BP-xxx |

---

# 6. 要件の全体像（機能／非機能／制約の関係）

- 対象ユーザー種別（ロール）一覧：  
- システム境界（内外の定義）：  
- 主要ユースケース／機能領域マップ（図 or 箇条書き）：  

> ここは「機能一覧・画面一覧（別紙）」と重複しやすいので、本書は “要件カテゴリの地図” に留め、詳細は別紙参照にする。

---

# 7. 機能要件（Functional Requirements）

## 7.0 記述ルール（必須）
- 1要件 = **1つの振る舞い**（複合条件は分割）
- **主語（システム）＋条件＋動詞＋目的語＋結果**で書く
- “適切に”“必要に応じて”は禁止（数値/条件へ置換）
- 受入条件（AC）と紐付けて **テスト可能** にする

## 7.1 機能要件一覧（FR）

| FR-ID | 機能名 | 要件本文 | 優先度 | 例外/代替 | 入出力 | 参照（業務ルール/画面/IF） | 受入条件ID |
|---|---|---|---|---|---|---|---|
| FR-001 |  | システムは…の場合…すること | Must |  | 入：/出： | BREQ-001, BRL-xx, UI-xx | AC-001 |

- **参照**：業務ルール定義（例外・権限含む）／画面一覧／IF一覧へリンク
- **入出力**：項目定義は「データ設計書」を参照する形でOK（重複回避）

## 7.2 機能要件（詳細テンプレ：1要件1ページでも可）

### [FR-0xx] 要件名
- 概要：  
- トリガー：  
- 事前条件：  
- 正常系：  
- 例外系：  
- 権限/ロール：  
- 入力：  
- 出力：  
- 状態遷移：  
- エラー/メッセージ：  
  - ※文言・UI表現の詳細は画面設計へ
- 監査ログ要否：要 / 否（詳細は方式設計・ログ方針へ）
- 関連：BREQ-xxx / 業務フローBP-xxx / 業務ルールBRL-xx / 画面UI-xx / IF-xx
- 受入条件：AC-xx 参照

## 7.3 典型の機能要件カテゴリ（必要なものだけ章立て）
- 画面（入力・検索・一覧・詳細・登録・承認 等）
- 帳票（要件は「何をいつ誰が出すか」。出力条件・レイアウトは帳票設計へ）
- バッチ（要件：目的・実行条件・完了条件・失敗時の扱い）
- 外部連携（要件：連携目的・タイミング・保証範囲・失敗時）
- 権限（ロール別の可能操作を要件として定義。詳細マトリクスは別紙でもOK）
- データ保持・履歴（保持期間・参照可否・削除条件）
- 監査（誰が何をいつ変更したか、改ざん耐性要否）

---

# 8. 非機能要件（Non-Functional Requirements）

## 8.0 記述ルール
- **「品質特性」＋「測定指標」＋「測定条件」＋「合否基準」**をセットで書く
- “高速”“安定”は禁止 → **P95応答時間、RTO/RPO、稼働率**などに落とす

## 8.1 非機能要件一覧（NFR）

| NFR-ID | 分類 | 要件 | 指標/閾値 | 測定条件 | 優先度 | 検証方法 | 設計参照 |
|---|---|---|---|---|---|---|---|
| NFR-001 | 性能 |  | P95=xxx ms | 同時xxユーザ/データ量xx | Must | 性能試験 | 方式設計/性能計画 |

## 8.2 非機能カテゴリ別テンプレ（必要分だけ）

### A) 性能・スループット
- 画面応答：P50/P95/P99、最大応答
- バッチ：処理時間上限、締め時刻
- 連携：レイテンシ、再送、遅延許容

### B) 可用性・信頼性
- 稼働率（例：月間99.9%）
- RTO/RPO（災害/障害別）
- フェイルオーバー、冗長化要否（詳細は方式設計へ）

### C) セキュリティ
- 認証（SSO/MFA要否）
- 認可（RBAC/ABACの方針、最小権限）
- 監査ログ（対象操作、保持期間、閲覧権限）
- 暗号化（通信/保存、鍵管理の責任分界）
- 脆弱性対応（SLA、パッチ方針）

### D) 運用・保守（Operability）
- 監視（死活、性能、業務KPI、アラート閾値）
- 障害時手順（一次切り分け、エスカレーション）
- 定常作業（棚卸し、権限申請、バックアップ確認）
- ログ方針（粒度、PIIマスキング）

### E) 拡張性・変更容易性
- 機能追加時の影響範囲目標（例：設定で対応）
- コンフィグ管理、Feature Flag要否

### F) 互換性・制約（クライアント/ブラウザ等）
- 対応ブラウザ/OS/デバイス
- 外部製品のバージョン範囲

### G) データ管理
- データ保持・アーカイブ
- 個人情報/機微情報の扱い
- データ整合性（参照整合、二重登録防止など）

### H) UI/UX・アクセシビリティ
- WCAG等の準拠要否
- 入力補助、エラー提示の原則（文言は画面設計へ）

### I) コンプライアンス・法令・監査
- 対象法令、監査要件、証跡の出し方（詳細は運用/セキュリティ設計へ）

---

# 9. 制約（Constraints）

> “要件”ではなく「選択の自由を縛る条件」。揉めがちなので独立章にします。

## 9.1 制約一覧（CON）

| CON-ID | 種別（技術/業務/法務/運用/予算/納期） | 制約内容 | 根拠 | 影響 | 例外可否 | 決定者 |
|---|---|---|---|---|---|---|
| CON-001 | 技術 | 例）クラウドはAWSのみ |  |  | 不可 |  |

## 9.2 代表例（抜け漏れ防止）
- 技術：言語/基盤/DB/ネットワーク、既存標準、ID基盤必須
- 業務：締め日、稟議ルール、承認フロー固定
- 法務：個人情報、保存期限、越境移転、同意要件
- 運用：夜間バッチ禁止時間帯、運用体制、監視ツール
- 予算/納期：マイルストーン、段階リリース前提

---

# 10. 受入条件（Acceptance Criteria）／受入範囲

> 「完成の定義」をここで固定します。テスト仕様書に落ちる前の“契約点”です。

## 10.1 受入の前提（受入環境・データ・体制）
- 受入環境：  
- 受入データ条件：マスタ/初期データ、匿名化要否：  
- 受入体制：誰が合否判定するか（業務/情シス/ベンダ）：  
- 受入期間：yyyy/mm/dd〜yyyy/mm/dd  

## 10.2 受入条件一覧（AC）

| AC-ID | 対象（FR/NFR/CON） | 受入条件（合格基準） | 証跡（ログ/画面/レポート） | 試験種別 | 重要度 |
|---|---|---|---|---|---|
| AC-001 | FR-001 | 例）ロールAでX登録でき、ロールBでは不可 | SS/監査ログ | UAT | High |
| AC-002 | NFR-001 | 例）ピーク時P95がxx ms以下 | 試験結果レポート | 性能 | High |

## 10.3 受入範囲（どこまでやるか）
- 対象試験：受入/結合/性能（どれを受入に含めるか）
- 対象外：  
- 既知の未対応（Known limitations）：（合意の上で残す）

## 10.4 合否判定ルール
- 例）Critical/High defect が0であること
- 再試験条件：  
- 例外承認フロー（誰がOKを出すか）：  

---

# 11. トレーサビリティ（要求→要件→設計→テスト）

## 11.1 トレーサビリティマトリクス（最小）

| BREQ | FR | 画面/IF/帳票 | 設計（基本/方式/詳細） | テスト（計画/仕様/ケース） | AC |
|---|---|---|---|---|---|
| BREQ-001 | FR-001 | UI-01 | BD-xx / ARCH-xx | TC-xxx | AC-001 |

> コツ：最初から完璧に埋めず、**ID体系だけ先に決めて**運用で埋める。

---

# 12. 品質チェックリスト（レビュー観点）

## 12.1 要件品質（DoD：要件）
- [ ] 各要件にIDがあり一意
- [ ] “誰が・いつ・何を・どうなる”が書かれている
- [ ] 曖昧語（適切に/原則/できれば）がない
- [ ] 例外・権限・監査・エラーの観点が抜けていない
- [ ] 受入条件に紐づく（テスト可能）
- [ ] 他ドキュメントと重複しない（参照で済ませている）

## 12.2 非機能の漏れ防止
- [ ] 性能（ピーク/通常/締め）
- [ ] 可用性（RTO/RPO/稼働率）
- [ ] セキュリティ（認証/認可/監査/暗号化）
- [ ] 運用（監視/障害対応/バックアップ）
- [ ] データ保持・削除・法令
- [ ] 外部連携（失敗時、再送、整合性）

---

# 付録（必要に応じて）

## 付録A：ロール定義・権限一覧（簡易）
| ロール | 説明 | 主な操作 | 備考 |
|---|---|---|---|
| ROLE-001 |  |  |  |

## 付録B：業務例外カタログ（要件レベル）
| EX-ID | 例外シナリオ | 期待するシステム動作（要件） | 参照（業務ルール） |
|---|---|---|---|
| EX-001 |  |  | BRL-xx |

## 付録C：データ分類（機微/PII/公開）
| データ分類 | 例 | 取扱い要件（保存/表示/マスキング/ログ） |
|---|---|---|
| PII |  |  |

## 付録D：ID体系（推奨）
- BREQ-xxx：ビジネス要求  
- FR-xxx：機能要件  
- NFR-xxx：非機能要件  
- CON-xxx：制約  
- ASM-xxx：前提  
- DEP-xxx：依存関係
- RSK-xxx：リスク
- AC-xxx：受入条件  
- BRL-xxx：業務ルール（別紙定義）
- BP-xxx：業務プロセス（別紙定義）
- EX-xxx：業務例外（別紙定義）
- ROLE-xxx：ロール定義
- （別紙）UI-xxx、REP-xxx、IF-xxx、JOB-xxx、DB-xxx、TC-xxx 等

---

## 運用の要点（短く）
- 粒度は「テストケースに落ちる単位」で書く（大きすぎたら分割）
- 要件本文に実装方法を混ぜない（混ざるなら制約/非機能として整理）
- 例外・権限・監査は抜けやすいので、FRごとにチェック観点を持つ
- 受入条件（AC）を早期に作る（要件品質が上がる）
