# 性能試験計画書

## 1. 目的
本番想定の負荷に対するシステムの挙動を確認し、要件定義で定められた性能目標を達成しているか検証する。また、限界性能を把握し、将来的なスケール計画の基礎データとする。

## 2. 性能目標（SLA/SLO）
| 指標 | 目標値 | 条件 |
| -- | -- | -- |
| スループット | 100 req/sec | ピーク時 |
| レスポンスタイム | 90%タイルで < 1.0秒 | 通常時 |
| エラー率 | < 0.1% | HTTP 5xx系 |
| リソース使用率 | CPU < 70%, Memory < 80% | サーバー単体 |

## 3. 試験の種類
1. **ロードテスト (Load Testing)**: 定常負荷およびピーク負荷をかけ、性能目標を満たすか確認する。
2. **ストレステスト (Stress Testing)**: 限界を超える負荷をかけ、システムがどのようにクラッシュするか、復旧するかを確認する。
3. **ロングランテスト (Soak Testing)**: 長時間（例: 24時間）負荷をかけ続け、メモリリークなどの経時劣化がないか確認する。

## 4. 試験環境構成
* **負荷生成ツール**: JMeter / k6 / Locust
* **実行環境**: 負荷生成用サーバー (Client) x 3台 -> ロードバランサー -> Web/App -> DB (Staging Env)
* **データ量**: 本番想定の1年分のデータ量を投入済みとする。

## 5. 試験シナリオ
### シナリオA: 基本回遊フロー
**ユーザー行動**: トップページ -> ログイン -> 商品一覧 -> 詳細 -> カート追加 -> 購入
**比率**: 全アクセスの 10%
**思考時間 (Think Time)**: 画面遷移ごとに 3〜5秒 (Random)

### シナリオB: 参照中心フロー
**ユーザー行動**: トップページ -> 商品検索 -> 商品詳細
**比率**: 全アクセスの 80%

## 6. 結果計測・報告項目
* 同時接続ユーザー数 (VU)
* Requests Per Second (RPS)
* レスポンスタイム (Avg, P90, P95, P99, Max)
* サーバーリソース (CPU, Memory, Network I/O, Disk I/O)
* DBメトリクス (Slow Query, Connections, Lock wait)

## 7. 実施スケジュール
（スケジュール表を記述）
