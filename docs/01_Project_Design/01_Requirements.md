## 0. この文書の位置づけ（必ず最初に書く）

- 本書：**要件（What）**／**受入条件（How to accept）**
- 方式設計・基本設計：**設計（How）**
- 画面設計・IF設計・データ設計：**仕様の具体化（How）**
- テスト計画・テスト仕様：**検証方法（How to verify）**

> コツ：要件は **観測可能・測定可能・テスト可能** にする。  
> 実装方式や画面レイアウトなどは原則「設計書側」に寄せる（ただし受入に直結するUI制約、法令、ブランドガイド等は制約として本書に残す）。

---

# 1. 文書管理

## 1.1 版数・変更履歴

| 版 | 日付 | 変更概要 | 作成 | レビュー | 承認 |
|---|---|---|---|---|---|
| v0.1 | 2026/01/18 | 初版（ドラフト） | 要件定義リード |  |  |

## 1.2 用語・略語（Glossary）

| 用語 | 定義 | 備考 |
|---|---|---|
| イベント | 日程調整の対象（会議/集まりなど） |  |
| 幹事 | イベント作成・確定など主担当の利用者 |  |
| 共同幹事 | 幹事権限の一部を持つ利用者 | 任意 |
| 参加者 | 候補日時へ回答する利用者 |  |
| 必須参加者 | 可否が優先判断される参加者 |  |
| 候補日時 | 参加可否を回答する日時候補 |  |
| 締切 | 回答受付の期限 |  |
| 回答 | 可/不可/未定 など参加可否 |  |
| 確定 | 日時候補の最終決定 |  |
| リマインド | 未回答者への自動/手動通知 |  |
| 招待リンク | 参加者が回答するためのURL |  |
| BREQ | ビジネス要求ID |  |
| FR | 機能要件ID |  |
| NFR | 非機能要件ID |  |
| CON | 制約ID |  |
| AC | 受入条件ID |  |
| BP | 業務プロセスID |  |
| ACT | アクティビティID |  |
| BRL | 業務ルールID |  |
| EX | 業務例外ID |  |
| SC | データスコープID |  |

## 1.3 参照資料

| 資料名 | 版 | 場所/リンク | 備考 |
|---|---|---|---|
| 業務フロー／業務ルール定義 |  | docs/01_Project_Design/02_Business_Process.md | To-Be/例外/権限ルール |
| 既存運用メモ |  | 口頭/チャット履歴 | LINE/Slack/Teams 等 |
| 既存ツール例 |  | 口頭 | Googleフォーム/調整さん/Doodle 等 |
| 既存集計 |  | 口頭/スプレッドシート | 手集計例 |

---

# 2. 背景・目的・ゴール

## 2.1 背景（現状課題）
- 現状：チャットやフォームで回答収集し、幹事が手集計・目視で決定している。  
- 課題：回答の散逸、未回答者フォローの手間、確定までのリードタイムが長い。  
- 影響：幹事負荷の増加、決定遅延、参加者の回答率低下。  

## 2.2 目的（Why）
- 目的：候補提示〜確定〜通知までの一連作業を短縮し、幹事の手戻りを削減する。  
- 期待効果（定量/定性）：  
  - 日程確定までのリードタイム中央値 50%短縮（例：7日→3日）  
  - 幹事の作業時間 40%削減  
  - 参加者の回答率 90%（締切まで）  
  - 幹事手動のリマインド回数 0〜1回  

## 2.3 成果物と範囲（本プロジェクトの提供物）
- 提供するシステム／機能：日程調整の作成・回答収集・集計・確定・通知・リマインド・再調整。  
- 提供しないもの：会場予約・決済・参加費徴収・物品手配・大規模イベント管理。  

---

# 3. スコープ定義

## 3.1 対象範囲（In Scope）
- 対象業務：候補提示、可否回答収集、集計、最適候補提示、確定、通知、リマインド、再調整。  
- 対象組織：社内チーム/部署、または友人グループ等の小〜中規模コミュニティ。  
- 対象ユーザー：幹事（主担当/共同幹事）、参加者。  
- 対象データ：イベント情報、候補日時、参加者一覧（表示名/連絡先ID）、回答、コメント、通知履歴、確定日時、（任意）カレンダー連携情報。  
- 通知チャネル（MVP）：メール／アプリ内通知  

## 3.2 対象外（Out of Scope）
- 会場予約・決済・参加費徴収  
- 物品手配、名簿印刷などのイベント運営  
- 数百〜数千人規模の大規模イベント管理（抽選/座席/入場管理等）  

## 3.3 ステークホルダー／RACI

| 項目 | 責任者(R) | 承認(A) | 相談(C) | 共有(I) |
|---|---|---|---|---|
| 要件確定 | 幹事 | イベントオーナー | 共同幹事、必須参加者の代表 | 参加者全員 |
| 受入判定 | 開発/QA | プロダクトオーナー（業務責任者） | 共同幹事、必須参加者の代表 | 参加者全員 |
| 運用設計 | SRE/運用担当 | 運用責任者 | セキュリティ、法務、幹事 | 参加者全員 |

---

# 4. 前提・依存・リスク（要件の土台）

## 4.1 前提（Assumptions）

| ID | 前提 | 根拠/出典 | 影響 | 確認期限 | オーナー |
|---|---|---|---|---|---|
| ASM-001 | セキュリティ管理者は組織管理者と兼務可 | 回答 | ロール定義/権限 |  |  |
| ASM-002 | リマインド再送（最大3回）失敗後は幹事へ通知し手動対応 | 回答 | EX/BRL/FR/AC |  |  |
| ASM-003 | 監査ログの検索条件は操作者/日時/イベントID/操作種別を最低限とする | 回答 | 監査要件/AC |  |  |
| ASM-004 | 参加者の回答完了時の幹事通知はON/OFF設定とする | 回答 | BRL/FR/AC |  |  |

## 4.2 依存関係（他システム/他PJ/組織）

| ID | 依存事項 | 相手/担当 | 期日 | 未確定時の影響 | 対応方針 |
|---|---|---|---|---|---|
| DEP-001 | メール配信基盤（MVP必須） | 運用/情シス | TBD | 通知KPI未達 | 代替チャネル/再送 |
| DEP-002 | 日本祝日マスタの年次更新 | 運用者 | 年1回 | 承認期限計算誤差 | 更新手順書 |
| DEP-003 | 監査アカウント付与/剥奪 | セキュリティ管理者 | 随時 | 監査実施不可 | 申請フロー整備 |

## 4.3 リスク一覧（要件観点）

| ID | リスク | 発生確率 | 影響度 | 対策 | 残リスク |
|---|---|---|---|---|---|
| RSK-001 | 通知遅延/不達により回答率KPI未達 | 中 | 高 | 再送/手動対応、代替通知 | 低 |
| RSK-002 | 承認遅延により確定が遅れる | 中 | 中 | 再通知/エスカレーション/承認者変更 | 低 |
| RSK-003 | 招待リンク転送による不正回答 | 低 | 中 | 参加申請→幹事承認 | 低 |

---

# 5. 要求（ビジネス要求）整理（上位要求）

## 5.1 ビジネス要求一覧（BREQ）

| BREQ-ID | 要求（1文） | 成功指標(KPI) | 優先度 | 根拠/出典 | 関連業務フロー |
|---|---|---|---|---|---|
| BREQ-001 | 日程確定までのリードタイムを短縮すること | 中央値50%短縮 | Must | KPI提示 | BP-001〜BP-005 |
| BREQ-002 | 幹事の作業時間を削減すること | 40%削減 | Must | KPI提示 | BP-001〜BP-005 |
| BREQ-003 | 参加者の回答率を向上させること | 締切まで90% | Must | KPI提示 | BP-002, BP-005 |
| BREQ-004 | 幹事の手動リマインド回数を削減すること | 0〜1回 | Should | KPI提示 | BP-005 |
| BREQ-005 | 個人情報の最小化と同意管理を満たすこと | 監査/同意要件 | Must | 制約提示 | BP-001〜BP-005 |

---

# 6. 要件の全体像（機能／非機能／制約の関係）

- 対象ユーザー種別（ロール）一覧：幹事、共同幹事、参加者、運用者、組織管理者、（任意）承認者  
- システム境界（内外の定義）：日程調整の作成〜回答収集〜確定通知までを対象。外部カレンダー/通知連携は任意連携として扱う。  
- 主要ユースケース／機能領域マップ：イベント作成、候補管理、参加者招待、回答収集、集計/最適候補提示、確定、通知/リマインド、再調整。  

---

# 7. 機能要件（Functional Requirements）

## 7.0 記述ルール（必須）
- 1要件 = **1つの振る舞い**（複合条件は分割）
- **主語（システム）＋条件＋動詞＋目的語＋結果**で書く
- “適切に”“必要に応じて”は禁止（数値/条件へ置換）
- 受入条件（AC）と紐付けて **テスト可能** にする

## 7.1 機能要件一覧（FR）

| FR-ID | 機能名 | 要件本文 | 優先度 | 例外/代替 | 入出力 | 参照（業務ルール/画面/IF） | 受入条件ID |
|---|---|---|---|---|---|---|---|
| FR-001 | イベント作成 | システムは幹事がイベント名・説明を入力してイベントを作成できること | Must |  | 入：イベント名/説明 / 出：イベントID | BREQ-002, BP-001 | AC-001 |
| FR-002 | 締切初期値設定 | システムは幹事が締切を未設定の場合、作成日時+3日18:00を初期値として提示し、幹事の確認後に保存できること | Must |  | 入：締切設定 / 出：締切日時 | BREQ-002, BRL-003, BP-001 | AC-002 |
| FR-003 | 候補日時管理 | システムは幹事/共同幹事が候補日時を追加・編集できること | Must |  | 入：候補日時 / 出：候補リスト | BREQ-002, BP-001 | AC-003 |
| FR-004 | 参加者招待 | システムは幹事/共同幹事が参加者を招待し、招待リンクを発行してメール/アプリ内通知を送信できること | Must |  | 入：参加者一覧 / 出：招待リンク・通知履歴 | BREQ-001, BREQ-003, BP-001 | AC-004 |
| FR-005 | 招待リンクアクセス制御 | システムは招待済み参加者は回答画面へ遷移し、未招待者は参加申請へ誘導すること | Must | EX-003 | 入：招待リンク / 出：回答画面または申請画面 | BREQ-005, BRL-005, BP-002 | AC-005 |
| FR-006 | 参加申請承認 | システムは幹事が参加申請を承認/却下でき、結果を申請者へ通知すること | Must |  | 入：申請 / 出：承認結果・通知 | BREQ-005, BRL-005, BP-002 | AC-006 |
| FR-007 | 回答登録 | システムは参加者が候補日時に対して可/不可/未定とコメントを登録できること | Must |  | 入：回答/コメント / 出：回答結果 | BREQ-003, BP-002 | AC-007 |
| FR-008 | 回答変更 | システムは参加者が締切前に回答を変更できること | Must | EX-004 | 入：変更後回答 / 出：更新済み回答 | BREQ-003, BRL-008, BP-002 | AC-008 |
| FR-009 | 締切後の回答制御 | システムは締切到来時にイベントを締切状態へ遷移し、回答登録を拒否すること | Must | EX-004 | 入：締切到来 / 出：締切状態 | BREQ-001, BRL-011, BP-002 | AC-009 |
| FR-010 | 回答集計表示 | システムは候補別の回答数（可/不可/未定）を集計して幹事に表示できること | Must |  | 入：回答データ / 出：集計結果 | BREQ-001, BREQ-002, BP-003 | AC-010 |
| FR-011 | 最適候補提示 | システムは必須参加者優先・可人数最大・未定少・日時早い順で候補を順位付けして提示できること | Must | EX-005 | 入：集計結果/必須参加者 / 出：候補順位 | BREQ-001, BRL-001, BRL-002, BP-003 | AC-011 |
| FR-012 | 必須参加者設定 | システムは幹事が参加者を必須参加者として指定できること | Should |  | 入：参加者指定 / 出：必須フラグ | BREQ-001, BP-003 | AC-012 |
| FR-013 | 公式イベント承認必須 | システムは公式フラグONのイベントで確定前に承認を必須とすること（OFFの場合は承認不要） | Must | EX-001 | 入：公式フラグ/承認結果 / 出：確定可否 | BREQ-005, BRL-006, BP-004 | AC-013 |
| FR-014 | 承認ワークフロー | システムは承認依頼送信、承認/否認、3営業日期限、再通知（1日1回×最大3回）、期限超過時の幹事エスカレーションと承認者変更を提供すること | Must | EX-001, EX-002 | 入：承認依頼/期限/承認者変更 / 出：承認結果・通知 | BREQ-002, BRL-017, BP-004/7 | AC-014 |
| FR-015 | 確定通知 | システムは確定日時を参加者全員へメール/アプリ内通知できること | Must |  | 入：確定日時 / 出：通知履歴 | BREQ-001, BREQ-003, BP-004 | AC-015 |
| FR-016 | 自動リマインド | システムは幹事のON/OFFに従い、締切24h/2h前に未回答者へ自動リマインドを送信し、失敗時は30分間隔で最大3回再送すること | Must | EX-006 | 入：未回答者/締切/ON-OFF / 出：通知履歴 | BREQ-003, BREQ-004, BRL-004, BRL-023, BP-005 | AC-016 |
| FR-017 | 再調整 | システムは幹事が候補追加/締切延長/回答保持・全回答リセットを選択でき、全参加者へ再調整通知を送信できること | Must | EX-007 | 入：再調整選択/更新内容 / 出：更新済み候補・通知 | BREQ-002, BRL-013, BRL-022, BRL-024, BP-005 | AC-017 |
| FR-018 | 回答閲覧設定 | システムは参加者同士の回答閲覧可否を組織デフォルト＋イベント単位で設定でき、締切後は非公開時に本人のみ閲覧できること | Must |  | 入：設定 / 出：閲覧範囲 | BREQ-005, BRL-010, BRL-015, BRL-020, BP-002/003 | AC-018 |
| FR-019 | コメント閲覧制御 | システムはコメントを本人と幹事のみ閲覧可能にすること | Must |  | 入：コメント / 出：閲覧制御 | BREQ-005, BRL-021, BP-002 | AC-019 |
| FR-020 | 監査ログ記録 | システムは作成/変更/確定/招待/権限変更/承認/承認者変更/公式フラグ変更の監査ログを記録し、重要操作ログを3年間保持すること | Must |  | 入：操作イベント / 出：監査ログ | BREQ-005, 02_Business_Process:10 | AC-020 |
| FR-021 | 代行・委任 | システムは幹事の申請→組織管理者承認により代行・委任を設定でき、最大30日で自動失効すること | Should |  | 入：委任申請/承認 / 出：委任設定 | BREQ-002, BRL-025, BP-001/005 | AC-021 |
| FR-022 | 承認者候補管理 | システムは組織管理者が承認者候補リストを設定・更新できること | Must |  | 入：候補リスト / 出：更新済みリスト | BREQ-005, BP-004/7 | AC-022 |
| FR-023 | 監査アカウント閲覧 | システムは監査アカウントのみが全イベントのログ/回答を閲覧できること | Must |  | 入：監査アクセス / 出：監査閲覧 | BREQ-005, BRL-026, SC-004 | AC-023 |
| FR-024 | 監査アカウント管理 | システムはセキュリティ管理者が監査アカウントを付与/剥奪できること | Must |  | 入：付与/剥奪 / 出：監査アカウント状態 | BREQ-005 | AC-024 |
| FR-025 | ゲスト本人確認設定 | システムは幹事がゲスト本人確認のON/OFFを設定できること（デフォルトOFF） | Should |  | 入：設定 / 出：本人確認要否 | BREQ-005, BRL-007, BP-002 | AC-027 |
| FR-026 | 公式フラグ管理 | システムは幹事が公式フラグを設定/解除でき、解除時は承認者へ通知し再承認を必須化すること | Must | EX-002 | 入：公式フラグ変更 / 出：通知・承認ステータス更新 | BREQ-005, BRL-016, BRL-018, BP-004 | AC-028 |
| FR-027 | 回答完了通知設定 | システムは幹事が参加者の回答完了時の通知ON/OFFを設定できること | Should |  | 入：設定 / 出：通知要否 | BREQ-003, BRL-027, BP-002 | AC-029 |

## 7.2 機能要件（詳細）

### [FR-001] イベント作成
- 概要：幹事がイベントの基本情報を登録できる  
- トリガー：幹事がイベント作成を保存  
- 事前条件：幹事がイベント作成権限を持つ  
- 正常系：イベント名/説明を保存しイベントIDを発番する  
- 例外系：なし  
- 権限/ロール：幹事  
- 入力：イベント名、説明  
- 出力：イベントID  
- 状態遷移：下書き→公開中  
- 関連：BP-001 / AC-001  

### [FR-002] 締切初期値設定
- 概要：締切未設定を防ぐため既定値を提示する  
- トリガー：幹事がイベントを保存する  
- 事前条件：幹事がイベント作成権限を持つ  
- 正常系：締切未入力の場合は「作成日時+3日18:00」を提示し、幹事確認後に保存する  
- 例外系：なし  
- 権限/ロール：幹事  
- 入力：締切設定  
- 出力：締切日時  
- 状態遷移：下書き→公開中（締切設定済み）  
- 関連：BRL-003 / BP-001 / AC-002  

### [FR-003] 候補日時管理
- 概要：候補日時の追加・編集を行う  
- トリガー：幹事/共同幹事が候補日時を保存  
- 事前条件：イベント作成済み  
- 正常系：候補日時を追加・編集できる  
- 例外系：参加者は編集不可  
- 権限/ロール：幹事/共同幹事  
- 入力：候補日時  
- 出力：候補リスト  
- 状態遷移：公開中  
- 関連：BP-001 / AC-003  

### [FR-004] 参加者招待
- 概要：参加者を招待し回答収集を開始する  
- トリガー：幹事/共同幹事が招待操作を行う  
- 事前条件：イベント作成済み、候補日時登録済み  
- 正常系：招待リンクを発行し、参加者へメール/アプリ内通知を送信する  
- 例外系：なし  
- 権限/ロール：幹事/共同幹事  
- 入力：参加者一覧  
- 出力：招待リンク、通知履歴  
- 状態遷移：下書き→公開中  
- 関連：BP-001 / AC-004  

### [FR-005] 招待リンクアクセス制御
- 概要：招待済み参加者と未招待者を判定する  
- トリガー：参加者が招待リンクにアクセス  
- 事前条件：招待リンク発行済み  
- 正常系：招待済み参加者は回答画面へ遷移する  
- 例外系：未招待者は参加申請画面へ誘導（EX-003）  
- 権限/ロール：参加者  
- 入力：招待リンク  
- 出力：回答画面/申請画面  
- 状態遷移：公開中（回答受付）  
- 関連：BRL-005 / EX-003 / BP-002 / AC-005  

### [FR-006] 参加申請承認
- 概要：参加申請の承認/却下を行う  
- トリガー：幹事が参加申請を処理  
- 事前条件：未招待者が参加申請を送信  
- 正常系：承認/却下を記録し、申請者へ通知する  
- 例外系：なし  
- 権限/ロール：幹事  
- 入力：参加申請  
- 出力：承認結果、通知履歴  
- 状態遷移：公開中  
- 関連：BRL-005 / BP-002 / AC-006  

### [FR-007] 回答登録
- 概要：参加者が候補日時の可否を回答する  
- トリガー：参加者が回答を送信  
- 事前条件：締切前、参加承認済み  
- 正常系：可/不可/未定とコメントを登録し保存する  
- 例外系：なし  
- 権限/ロール：参加者  
- 入力：回答、コメント  
- 出力：回答結果  
- 状態遷移：公開中（回答受付）  
- 関連：BP-002 / AC-007  

### [FR-008] 回答変更
- 概要：締切前の回答変更を許可する  
- トリガー：参加者が回答を変更  
- 事前条件：締切前  
- 正常系：変更後の回答が保存される  
- 例外系：締切後は変更不可（EX-004）  
- 権限/ロール：参加者  
- 入力：変更後回答  
- 出力：更新済み回答  
- 状態遷移：公開中→締切（時刻到来）  
- 関連：BRL-008 / EX-004 / BP-002 / AC-008  

### [FR-009] 締切後の回答制御
- 概要：締切到来時に回答受付を終了する  
- トリガー：締切到来  
- 事前条件：公開中  
- 正常系：状態を締切へ遷移し、新規回答を拒否する  
- 例外系：締切後の回答は不可（EX-004）  
- 権限/ロール：システム  
- 入力：締切到来  
- 出力：締切状態  
- 状態遷移：公開中→締切  
- 関連：BRL-011 / EX-004 / BP-002 / AC-009  

### [FR-010] 回答集計表示
- 概要：候補別の回答集計を表示する  
- トリガー：幹事が集計画面を表示  
- 事前条件：回答が存在  
- 正常系：可/不可/未定の集計を表示する  
- 例外系：なし  
- 権限/ロール：幹事  
- 入力：回答データ  
- 出力：集計結果  
- 状態遷移：公開中  
- 関連：BP-003 / AC-010  

### [FR-011] 最適候補提示
- 概要：最適候補を順位付けして提示する  
- トリガー：幹事が集計画面を表示  
- 事前条件：回答が存在  
- 正常系：必須参加者優先→可人数最大→未定少→日時早い順で順位付け  
- 例外系：最適候補が存在しない場合は再調整へ移行（EX-005）  
- 権限/ロール：幹事  
- 入力：集計結果、必須参加者設定  
- 出力：候補順位  
- 状態遷移：公開中（集計）  
- 関連：BRL-001/002 / EX-005 / BP-003 / AC-011  

### [FR-012] 必須参加者設定
- 概要：必須参加者を指定する  
- トリガー：幹事が参加者を必須指定  
- 事前条件：参加者が登録済み  
- 正常系：必須参加者フラグが保存される  
- 例外系：なし  
- 権限/ロール：幹事  
- 入力：必須指定  
- 出力：必須フラグ  
- 状態遷移：公開中  
- 関連：BP-003 / AC-012  

### [FR-013] 公式イベント承認必須
- 概要：公式イベントの確定前承認を必須化する  
- トリガー：幹事が確定操作  
- 事前条件：公式フラグON  
- 正常系：承認完了まで確定不可、承認完了後に確定可能  
- 例外系：承認否認は差戻し（EX-001）  
- 権限/ロール：幹事/承認者  
- 入力：公式フラグ、承認結果  
- 出力：確定可否  
- 状態遷移：公開中→承認待ち→確定/差戻し  
- 関連：BRL-006 / EX-001 / BP-004 / AC-013  

### [FR-014] 承認ワークフロー
- 概要：承認依頼、再通知、エスカレーション、承認者変更を提供する  
- トリガー：公式イベントで確定操作  
- 事前条件：公式フラグON、承認者候補リストあり  
- 正常系：承認依頼送信、承認/否認記録、3営業日超過で再通知（1日1回×最大3回）、超過後は幹事が候補リストから承認者変更  
- 例外系：公式フラグ解除時は再承認必須（EX-002）  
- 権限/ロール：幹事/承認者/組織管理者  
- 入力：承認依頼、承認結果、承認者変更  
- 出力：承認結果、通知履歴  
- 状態遷移：承認待ち→承認/差戻し→確定  
- 関連：BRL-017 / EX-002 / BP-004/7 / AC-014  

### [FR-015] 確定通知
- 概要：確定日時を参加者へ通知する  
- トリガー：幹事が確定操作を完了  
- 事前条件：確定日時が決定済み  
- 正常系：参加者全員へメール/アプリ内通知を送信する  
- 例外系：なし  
- 権限/ロール：幹事/システム  
- 入力：確定日時  
- 出力：通知履歴  
- 状態遷移：確定  
- 関連：BP-004 / AC-015  

### [FR-016] 自動リマインド
- 概要：未回答者へ自動リマインドを送信する  
- トリガー：締切24時間前/2時間前  
- 事前条件：幹事が自動リマインドON、未回答者あり  
- 正常系：未回答者へ通知を送信する  
- 例外系：送信失敗時は30分間隔で最大3回再送し、失敗後は幹事へ通知して手動対応（EX-006）  
- 権限/ロール：幹事（ON/OFF）/システム  
- 入力：締切、未回答者、ON/OFF設定  
- 出力：通知履歴  
- 状態遷移：公開中（締切前）  
- 関連：BRL-004/023 / EX-006 / BP-005 / AC-016  

### [FR-017] 再調整
- 概要：候補追加/締切延長/回答保持・リセットを行い再通知する  
- トリガー：幹事が再調整を実行  
- 事前条件：確定前  
- 正常系：候補追加/締切延長/回答保持・全回答リセットを選択でき、全参加者へ再調整通知する  
- 例外系：再調整後も未回答が残る場合は締切延長/再リマインド（EX-007）  
- 権限/ロール：幹事  
- 入力：再調整方針、更新内容  
- 出力：更新済み候補/締切、通知履歴  
- 状態遷移：公開中→再調整→公開中  
- 関連：BRL-013/019/022/024 / EX-007 / BP-005 / AC-017  

### [FR-018] 回答閲覧設定
- 概要：回答閲覧範囲を設定する  
- トリガー：幹事が閲覧設定を変更  
- 事前条件：イベント作成済み  
- 正常系：組織デフォルト＋イベント単位で閲覧範囲を設定でき、締切後に非公開の場合は本人のみ閲覧できる  
- 例外系：なし  
- 権限/ロール：幹事  
- 入力：閲覧設定  
- 出力：閲覧範囲  
- 状態遷移：公開中/締切後  
- 関連：BRL-010/015/020 / BP-002/003 / AC-018  

### [FR-019] コメント閲覧制御
- 概要：コメントの閲覧範囲を制御する  
- トリガー：コメント閲覧時  
- 事前条件：コメントが存在  
- 正常系：本人と幹事のみ閲覧できる  
- 例外系：共同幹事は閲覧不可  
- 権限/ロール：幹事/本人  
- 入力：コメント  
- 出力：閲覧結果  
- 状態遷移：なし  
- 関連：BRL-021 / AC-019  

### [FR-020] 監査ログ記録
- 概要：重要操作の監査ログを記録し保持する  
- トリガー：対象操作の発生  
- 事前条件：監査対象操作である  
- 正常系：操作者/日時/対象ID/変更前後/理由/承認経路を記録し、重要操作ログを3年保持する  
- 例外系：なし  
- 権限/ロール：システム  
- 入力：操作イベント  
- 出力：監査ログ  
- 状態遷移：なし  
- 関連：02_Business_Process:10 / AC-020  

### [FR-021] 代行・委任
- 概要：幹事の代行・委任を設定する  
- トリガー：幹事が委任を申請  
- 事前条件：組織管理者が承認  
- 正常系：委任が有効化され、最大30日で自動失効する  
- 例外系：なし  
- 権限/ロール：幹事/組織管理者  
- 入力：委任申請、期間  
- 出力：委任設定  
- 状態遷移：なし  
- 関連：BRL-025 / AC-021  

### [FR-022] 承認者候補管理
- 概要：承認者候補リストを管理する  
- トリガー：組織管理者が候補リストを更新  
- 事前条件：組織管理者権限を持つ  
- 正常系：候補リストが追加/更新される  
- 例外系：なし  
- 権限/ロール：組織管理者  
- 入力：候補リスト  
- 出力：更新済みリスト  
- 状態遷移：なし  
- 関連：BP-004/7 / AC-022  

### [FR-023] 監査アカウント閲覧
- 概要：監査アカウントのみが全イベントのログ/回答を閲覧できる  
- トリガー：監査アカウントの閲覧操作  
- 事前条件：監査アカウントである  
- 正常系：全イベントのログ/回答が閲覧できる  
- 例外系：非監査アカウントは閲覧不可  
- 権限/ロール：監査アカウント  
- 入力：監査アクセス  
- 出力：監査閲覧結果  
- 状態遷移：なし  
- 関連：BRL-026 / SC-004 / AC-023  

### [FR-024] 監査アカウント管理
- 概要：監査アカウントを付与/剥奪する  
- トリガー：セキュリティ管理者が付与/剥奪操作  
- 事前条件：セキュリティ管理者権限を持つ  
- 正常系：監査アカウントの付与/剥奪が反映される  
- 例外系：なし  
- 権限/ロール：セキュリティ管理者（組織管理者兼務可）  
- 入力：付与/剥奪  
- 出力：監査アカウント状態  
- 状態遷移：なし  
- 関連：AC-024  

### [FR-025] ゲスト本人確認設定
- 概要：ゲスト本人確認のON/OFFを設定する  
- トリガー：幹事が本人確認設定を変更  
- 事前条件：イベント作成済み  
- 正常系：設定が保存され、OFF時は本人確認を要求しない  
- 例外系：なし  
- 権限/ロール：幹事  
- 入力：本人確認設定  
- 出力：本人確認要否  
- 状態遷移：公開中  
- 関連：BRL-007 / AC-027  

### [FR-026] 公式フラグ管理
- 概要：公式フラグを設定/解除し承認状態を制御する  
- トリガー：幹事が公式フラグを変更  
- 事前条件：確定前  
- 正常系：公式フラグONで承認必須、OFFで承認不要。解除時は承認者へ通知し再承認待ちに更新  
- 例外系：公式フラグ解除後は再承認必須（EX-002）  
- 権限/ロール：幹事  
- 入力：公式フラグ変更  
- 出力：承認ステータス、通知履歴  
- 状態遷移：公開中↔承認待ち  
- 関連：BRL-016/018 / EX-002 / AC-028  

### [FR-027] 回答完了通知設定
- 概要：回答完了時の幹事通知のON/OFFを設定する  
- トリガー：幹事が通知設定を変更  
- 事前条件：イベント作成済み  
- 正常系：ONの場合は参加者の回答完了時に幹事へ通知する  
- 例外系：OFFの場合は通知しない  
- 権限/ロール：幹事  
- 入力：通知設定  
- 出力：通知要否  
- 状態遷移：公開中  
- 関連：BRL-027 / BP-002 / AC-029  

---

# 8. 非機能要件（Non-Functional Requirements）

## 8.0 記述ルール
- **「品質特性」＋「測定指標」＋「測定条件」＋「合否基準」**をセットで書く
- “高速”“安定”は禁止 → **P95応答時間、RTO/RPO、稼働率**などに落とす

## 8.1 非機能要件一覧（NFR）

| NFR-ID | 分類 | 要件 | 指標/閾値 | 測定条件 | 優先度 | 検証方法 | 設計参照 |
|---|---|---|---|---|---|---|---|
| NFR-001 | 性能 | 主要画面/主要APIの応答を保証する | P95 <= 2秒 | 参加者50人/イベント、ピーク数百req/分 | Must | 性能試験 | 方式設計/性能計画 |
| NFR-002 | 通知 | 通知トリガーから送信要求までの遅延を抑える | 5分以内 | 通知チャネル=メール/アプリ内 | Must | 運用試験 | 運用設計 |
| NFR-003 | 可用性 | サービス稼働率を確保する | 月間99.9% | 本番環境 | Must | 稼働実績/監視レポート | 運用設計 |
| NFR-004 | 復旧 | 障害時の復旧目標を満たす | RTO=24h/RPO=24h | 重大障害時 | Must | DR/障害訓練 | 運用設計 |
| NFR-005 | 運用 | 監視を実施し異常を検知する | 監視設定あり | 本番環境 | Must | 監視設定/運用試験 | 運用設計 |
| NFR-006 | セキュリティ | 認証/認可の強度を確保する | SSO必須/MFA必須 | 本番環境 | Must | セキュリティ試験 | 方式設計 |
| NFR-007 | セキュリティ | 監査ログの改ざん防止を実施する | WORM必須 | 監査ログ | Must | 監査レビュー | 方式設計 |
| NFR-008 | セキュリティ | データを暗号化する | 通信TLS＋保存時暗号化（全データ） | 本番環境 | Must | セキュリティ試験 | 方式設計 |
| NFR-009 | 運用 | 業務KPIを監視する | 回答率/確定時間を監視 | 本番環境 | Should | 監視レポート | 運用設計 |
| NFR-010 | 運用 | バックアップを実施する | 日次バックアップ | 本番環境 | Must | 運用試験/ログ | 運用設計 |
| NFR-011 | 外部連携 | 連携失敗時の再送と手動対応を行う | 再送最大3回＋手動対応 | 連携失敗時 | Must | 運用試験 | 運用設計 |

---

# 9. 制約（Constraints）

## 9.1 制約一覧（CON）

| CON-ID | 種別（技術/業務/法務/運用/予算/納期） | 制約内容 | 根拠 | 影響 | 例外可否 | 決定者 |
|---|---|---|---|---|---|---|
| CON-001 | 法務/運用 | 個人データは最小化し、不要な属性は保持しない | ベースライン案 | 取得項目/画面項目 | 原則不可 |  |
| CON-002 | 法務 | カレンダー空き参照/予定作成は明示同意が必要 | ベースライン案 | 同意UI/ログ | 不可 |  |
| CON-003 | セキュリティ | 通信はTLS、保存時暗号化（機微データ） | ベースライン案 | 保存方式/運用 | 不可 |  |
| CON-004 | セキュリティ | 招待リンクは推測困難なランダム性を確保する | ベースライン案 | 共有/アクセス | 不可 |  |
| CON-005 | 監査 | 重要操作ログ（作成/変更/確定/招待/権限変更）を保持する | ベースライン案 | ログ設計 | 原則不可 |  |
| CON-006 | 運用/法務 | データ保持はイベント終了後180日で自動削除する | 回答 | 保持/削除 | 例外可 |  |
| CON-007 | 法務 | 個人情報保護法に沿った利用目的/削除手段の提示を行う | ベースライン案 | 画面/運用 | 不可 |  |
| CON-008 | セキュリティ | 招待リンク転送時は参加申請と幹事承認が必要 | 回答 | アクセス制御/承認 | 例外可 |  |

---

# 10. 受入条件（Acceptance Criteria）／受入範囲

## 10.1 受入の前提（受入環境・データ・体制）
- 受入環境：本番相当のステージング環境  
- 受入データ条件：マスタ/初期データ投入済み、匿名化不要  
- 受入体制：業務責任者（PO）＋開発/QA  
- 受入期間：TBD（開発計画確定後）  

## 10.2 受入条件一覧（AC）

| AC-ID | 対象（FR/NFR/CON） | 受入条件（合格基準） | 証跡（ログ/画面/レポート） | 試験種別 | 重要度 |
|---|---|---|---|---|---|
| AC-001 | FR-001 | 幹事がイベント名/説明を入力して保存するとイベントIDが発番される | 画面/ログ | UAT | High |
| AC-002 | FR-002 | 締切未入力で保存すると締切欄に「作成日時+3日18:00」が自動設定され、保存後に締切が空欄にならない | 画面/ログ | UAT | High |
| AC-003 | FR-003 | 幹事/共同幹事は候補日時を追加・編集でき、参加者は不可である | 画面/ログ | UAT | High |
| AC-004 | FR-004 | 招待操作で各参加者にメール/アプリ内通知が送信され、招待リンクが発行される | 通知ログ/画面 | UAT | High |
| AC-005 | FR-005 | 招待済み参加者は回答画面へ遷移し、未招待者は参加申請画面が表示される | 画面 | UAT | High |
| AC-006 | FR-006 | 幹事が参加申請を承認すると参加者に通知され、却下の場合は回答不可となる | 画面/ログ | UAT | High |
| AC-007 | FR-007 | 参加者が可/不可/未定とコメントを登録でき、回答が保存される | 画面/ログ | UAT | High |
| AC-008 | FR-008 | 締切前は回答変更が反映され、締切後は変更が拒否される | 画面/ログ | UAT | High |
| AC-009 | FR-009 | 締切到来時にイベントが締切状態へ遷移し、新規回答が拒否される | 画面/ログ | UAT | High |
| AC-010 | FR-010 | 候補別に可/不可/未定の集計が表示される | 画面 | UAT | High |
| AC-011 | FR-011 | 最適候補が「必須参加者全員可→可人数最大→未定少→日時早い順」で並ぶ | 画面 | UAT | High |
| AC-012 | FR-012 | 幹事が必須参加者を指定でき、指定内容が保存される | 画面/ログ | UAT | Medium |
| AC-013 | FR-013 | 公式フラグONのイベントは承認が完了するまで確定できず、OFFのイベントは確定可能 | 画面/ログ | UAT | High |
| AC-014 | FR-014 | 承認依頼が送信され、承認/否認が記録される。3営業日超過で再通知（1日1回×最大3回）後、幹事が候補リストから承認者変更を行える | 通知/監査ログ | UAT | High |
| AC-015 | FR-015 | 確定操作後、参加者全員にメール/アプリ内通知が送信される | 通知ログ | UAT | High |
| AC-016 | FR-016 | 自動リマインドON時に24h/2h前で未回答者へ送信され、失敗時は30分間隔で最大3回再送される | 通知ログ | UAT | High |
| AC-017 | FR-017 | 再調整時に幹事が「保持/リセット」を選択でき、全参加者へ再調整通知が送信される。リセット時は履歴保持で最新のみ表示される | 画面/通知ログ | UAT | High |
| AC-018 | FR-018 | 回答閲覧は組織デフォルト＋イベント単位で切替でき、締切後に非公開の場合は本人のみ閲覧できる | 画面 | UAT | Medium |
| AC-019 | FR-019 | コメントは本人と幹事のみ閲覧でき、共同幹事からは閲覧不可 | 画面 | UAT | Medium |
| AC-020 | FR-020 | 監査対象操作のログに操作者/日時/対象ID/変更前後/理由/承認経路が記録され、重要操作ログは3年保持される | 監査ログ | UAT | High |
| AC-021 | FR-021 | 幹事申請→組織管理者承認で代行/委任が有効化され、最大30日で自動失効する | 画面/ログ | UAT | Medium |
| AC-022 | FR-022 | 組織管理者が承認者候補リストを追加/更新できる | 画面/ログ | UAT | Medium |
| AC-023 | FR-023 | 監査アカウントのみが全イベントのログ/回答を閲覧できる | 画面/ログ | UAT | High |
| AC-024 | FR-024 | セキュリティ管理者が監査アカウントの付与/剥奪を実施できる | 画面/ログ | UAT | High |
| AC-025 | NFR-001 | 参加者50人/イベント・ピーク数百req/分条件で主要画面/主要APIのP95が2秒以内 | 性能試験レポート | 性能 | High |
| AC-026 | NFR-002 | 通知トリガーから送信要求まで5分以内である | 運用試験レポート | 運用 | High |
| AC-030 | NFR-003 | 月間稼働率が99.9%以上 | 稼働実績/監視レポート | 運用 | High |
| AC-031 | NFR-004 | 重大障害時のRTO=24h/RPO=24hを満たす | 障害訓練/DRレポート | 運用 | High |
| AC-032 | NFR-005 | 監視設定が有効化されアラートが検知できる | 監視設定/運用試験 | 運用 | High |
| AC-027 | FR-025 | 幹事がゲスト本人確認のON/OFFを設定でき、OFF時は本人確認を要求しない | 画面/ログ | UAT | Medium |
| AC-028 | FR-026 | 幹事が公式フラグを解除すると承認者へ通知され、承認ステータスが再承認待ちに更新される | 画面/ログ | UAT | High |
| AC-029 | FR-027 | 幹事が回答完了通知のON/OFFを設定でき、ONのときのみ幹事へ通知が送信される | 画面/通知ログ | UAT | Medium |
| AC-033 | NFR-006 | SSO必須かつMFA必須で認証できる | セキュリティ試験レポート | セキュリティ | High |
| AC-034 | NFR-007 | 監査ログがWORMにより改ざん不可である | 監査レビュー | セキュリティ | High |
| AC-035 | NFR-008 | 通信TLSおよび保存時暗号化（全データ）が有効である | セキュリティ試験レポート | セキュリティ | High |
| AC-036 | NFR-009 | 回答率/確定時間の監視が有効でレポート可能である | 監視レポート | 運用 | Medium |
| AC-037 | NFR-010 | 日次バックアップが実施され復元手順が検証済みである | 運用試験レポート | 運用 | High |
| AC-038 | NFR-011 | 連携失敗時に再送（最大3回）後、手動対応手順へ移行できる | 運用試験レポート | 運用 | High |

## 10.3 受入範囲（どこまでやるか）
- 対象試験：  
- 対象外：  
- 既知の未対応（Known limitations）：  

## 10.4 合否判定ルール
- 例）Critical/High defect が0であること  
- 再試験条件：Critical/Highが発生した場合は再試験  
- 例外承認フロー：業務責任者（PO）の承認  

---

# 11. トレーサビリティ（要求→要件→設計→テスト）

## 11.1 トレーサビリティマトリクス（最小）

| BREQ | FR | 画面/IF/帳票 | 設計（基本/方式/詳細） | テスト（計画/仕様/ケース） | AC |
|---|---|---|---|---|---|
| BREQ-001 | FR-004 |  |  |  | AC-004 |
| BREQ-001 | FR-009 |  |  |  | AC-009 |
| BREQ-001 | FR-010 |  |  |  | AC-010 |
| BREQ-001 | FR-011 |  |  |  | AC-011 |
| BREQ-001 | FR-012 |  |  |  | AC-012 |
| BREQ-001 | FR-015 |  |  |  | AC-015 |
| BREQ-002 | FR-001 |  |  |  | AC-001 |
| BREQ-002 | FR-002 |  |  |  | AC-002 |
| BREQ-002 | FR-003 |  |  |  | AC-003 |
| BREQ-002 | FR-017 |  |  |  | AC-017 |
| BREQ-002 | FR-021 |  |  |  | AC-021 |
| BREQ-003 | FR-004 |  |  |  | AC-004 |
| BREQ-003 | FR-007 |  |  |  | AC-007 |
| BREQ-003 | FR-008 |  |  |  | AC-008 |
| BREQ-003 | FR-016 |  |  |  | AC-016 |
| BREQ-003 | FR-027 |  |  |  | AC-029 |
| BREQ-004 | FR-016 |  |  |  | AC-016 |
| BREQ-005 | FR-005 |  |  |  | AC-005 |
| BREQ-005 | FR-006 |  |  |  | AC-006 |
| BREQ-005 | FR-013 |  |  |  | AC-013 |
| BREQ-005 | FR-014 |  |  |  | AC-014 |
| BREQ-005 | FR-018 |  |  |  | AC-018 |
| BREQ-005 | FR-019 |  |  |  | AC-019 |
| BREQ-005 | FR-020 |  |  |  | AC-020 |
| BREQ-005 | FR-022 |  |  |  | AC-022 |
| BREQ-005 | FR-023 |  |  |  | AC-023 |
| BREQ-005 | FR-024 |  |  |  | AC-024 |
| BREQ-005 | FR-025 |  |  |  | AC-027 |
| BREQ-005 | FR-026 |  |  |  | AC-028 |

---

# 12. 品質チェックリスト（レビュー観点）

## 12.1 要件品質（DoD：要件）
- [x] 各要件にIDがあり一意
- [x] “誰が・いつ・何を・どうなる”が書かれている
- [x] 曖昧語（適切に/原則/できれば）がない
- [x] 例外・権限・監査・エラーの観点が抜けていない
- [x] 受入条件に紐づく（テスト可能）
- [x] 他ドキュメントと重複しない（参照で済ませている）

## 12.2 非機能の漏れ防止
- [x] 性能（ピーク/通常/締め）
- [x] 可用性（RTO/RPO/稼働率）
- [x] セキュリティ（認証/認可/監査/暗号化）
- [x] 運用（監視/障害対応/バックアップ）
- [x] データ保持・削除・法令
- [x] 外部連携（失敗時、再送、整合性）

---

# 付録（必要に応じて）

## 付録D：ID体系（推奨）
- BREQ-xxx：ビジネス要求  
- FR-xxx：機能要件  
- NFR-xxx：非機能要件  
- CON-xxx：制約  
- ASM-xxx：前提  
- DEP-xxx：依存関係  
- RSK-xxx：リスク  
- AC-xxx：受入条件  
- BRL-xxx：業務ルール（別紙定義）  
- BP-xxx：業務プロセス（別紙定義）  
- EX-xxx：業務例外（別紙定義）  
- ROLE-xxx：ロール定義  
- UI-xxx、REP-xxx、IF-xxx、JOB-xxx、DB-xxx、TC-xxx 等  
